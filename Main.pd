#N canvas 106 190 1914 988 12;
#X obj -197 -188 adc~;
#N canvas 243 234 560 636 formant 0;
#X obj -644 -185 *~;
#X obj -643 -148 rfft~;
#X obj -646 -101 framp~;
#X obj -400 -173 *~;
#X obj -401 -137 rfft~;
#X obj -401 -96 framp~;
#X obj -401 -55 clip~ 0 1;
#X obj -347 -193 tabreceive~ hanning2;
#X obj -647 -51 clip~ 0 1;
#X obj -401 -226 *~ 20;
#X obj -644 -227 *~ 20;
#X obj -610 -342 hip~ 300;
#X obj -611 -304 lop~ 700;
#X obj -438 -341 hip~ 800;
#X obj -437 -311 lop~ 2400;
#X obj -583 -206 tabreceive~ hanning2;
#X obj -518 -385 inlet~;
#N canvas 0 0 450 300 (subpatch) 0;
#X array hanning2 64 float 5;
#A 0 0 0.00240764 0.00960734 0.0215298 0.0380601 0.0590392 0.084265
0.113494 0.146446 0.182803 0.222214 0.264301 0.308658 0.354857 0.402454
0.450991 0.5 0.549009 0.597545 0.645143 0.691342 0.735699 0.777786
0.817197 0.853554 0.886506 0.915736 0.940961 0.96194 0.978471 0.990393
0.997593 1 0.997592 0.990392 0.978469 0.961939 0.940959 0.915733 0.886503
0.853551 0.817194 0.777782 0.735695 0.691338 0.645139 0.597541 0.549004
0.499996 0.450987 0.40245 0.354853 0.308654 0.264297 0.222211 0.182799
0.146443 0.113491 0.0842621 0.0590367 0.038058 0.0215281 0.00960615
0.00240701;
#X coords 0 1 63 0 200 140 1 0 0;
#X restore -515 126 graph;
#X obj -645 33 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -633 68 samplerate~;
#X obj -633 165 osc~;
#X obj -632 198 *~ -0.5;
#X obj -632 238 +~ 0.5;
#X obj -645 279 tabwrite~ hanning2;
#X msg -492 69 0;
#X obj -633 131 / 1;
#X obj -633 102 / 128;
#X obj -646 -10 outlet~;
#X obj -401 -11 outlet~;
#X text -347 -327 << F2 range;
#X text -705 -326 F1 range >>;
#X text -547 -138 << FFT >>;
#X text -450 84 create a hanning window \, which is used to sample
the sound signal;
#X text -611 351 This patch is to show the F1 and F2 of the sound signal
in the frequency domain. I think if we want to show the distribution
of F1 and F2 in the frequency domain \, we have to use the FFT to transform
the signal. But as is the first time for me to use it \, it may have
lots bugs.;
#X text -187 -193 << use the hanning window to sample the signal;
#X text -339 -94 << output the value which will be shown into the array
;
#X text -601 -229 << emphaise the frequency >>;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 2 1;
#X connect 2 1 8 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 5 1;
#X connect 5 1 6 0;
#X connect 6 0 28 0;
#X connect 7 0 3 1;
#X connect 8 0 27 0;
#X connect 9 0 3 0;
#X connect 10 0 0 0;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 13 0 14 0;
#X connect 14 0 9 0;
#X connect 15 0 0 1;
#X connect 16 0 11 0;
#X connect 16 0 13 0;
#X connect 18 0 19 0;
#X connect 18 0 24 0;
#X connect 18 0 23 0;
#X connect 19 0 26 0;
#X connect 20 0 21 0;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 24 0 20 1;
#X connect 25 0 20 0;
#X connect 26 0 25 0;
#X restore -197 -128 pd formant;
#X obj 52 -121 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 52 -90 metro 20;
#X obj 52 -156 loadbang;
#N canvas 0 0 450 300 (subpatch) 0;
#X array Spectrum_Formant1_adc 64 float 5;
#A 0 0 0.132231 0.066048 0.0130006 0.00391742 0.00208827 0.00192595
0.00164902 0.000698811 0.000781192 0.000914889 0.00106354 0.00081437
0.000740972 0.000513541 0.000557499 0.00128396 0.00125578 0.00104269
0.000997388 0.000586973 0.000448747 0.000493824 0.000436506 0.00023996
5.57841e-005 0.00018491 0.00016416 9.12342e-005 6.79405e-005 5.70031e-005
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 1 63 0 200 140 1 0 0;
#X restore 394 -171 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array Spectrum_Formant2_adc 64 float 5;
#A 0 0 0.138805 0.064857 0.00898448 0.00910237 0.00559776 0.00607714
0.00568564 0.00278665 0.00305725 0.00361614 0.0041148 0.00321416 0.00295762
0.00208861 0.00230427 0.0051678 0.00498517 0.00413926 0.00400828 0.00235206
0.00181733 0.00201672 0.00178362 0.000979778 0.000237634 0.000753143
0.000665528 0.000368733 0.000277986 0.000233672 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 1 63 0 200 140 1 0 0;
#X restore 652 -171 graph;
#N canvas 271 97 522 662 segment 0;
#X obj 95 -368 fiddle~ 1024;
#X obj 134 -330 unpack;
#X obj 134 -293 mtof;
#X floatatom 81 -256 5 0 0 0 - - -;
#X floatatom 196 -293 5 0 0 0 - - -;
#X obj 81 -222 moses 85;
#X floatatom 81 -180 5 0 0 0 - - -;
#X floatatom 145 -181 5 0 0 0 - - -;
#X floatatom 177 -256 5 0 0 0 - - -;
#X obj 145 -144 moses 255;
#X floatatom 205 -107 5 0 0 0 - - -;
#X floatatom 145 -105 5 0 0 0 - - -;
#X obj 94 -409 inlet~;
#X obj 79 -73 outlet;
#X obj 180 -71 outlet;
#X text 49 178 This patch is used to segment the voiced and unvoiced
part of the sound signal. I have found lots of solutions and chose
one of them: it is said that the frequency between 85Hz to 255Hz is
voiced part \, the rest part are the unvoiced part. I use two arrays
to show the voiced and unvoiced parts. But actually \, I think this
method is not that good.;
#X text 194 -369 << fiddle \, 3rd output is raw pitch(f0) and amplitude(dB)
;
#X text 202 -200 << moses is seprate two parts \, left output is under
threshold \, right outlet is above threshold.;
#X msg 135 -11 relative;
#X obj 135 -52 t b f;
#X obj 135 28 hist 85 255 25;
#X obj 135 65 outlet;
#X msg 296 -15 relative;
#X obj 296 -53 t b f;
#X obj 296 24 hist 255 1000 25;
#X obj 296 64 outlet;
#X text 68 100 outlet>> 1 voiced duration;
#X text 67 119 outlet>> 2 voiced histgram;
#X text 270 100 outlet>> 3 unvoiced duration;
#X text 269 119 outlet>> 4 unvoiced histgram;
#X connect 0 2 1 0;
#X connect 1 0 2 0;
#X connect 1 1 4 0;
#X connect 2 0 3 0;
#X connect 2 0 8 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 7 0 9 0;
#X connect 9 0 11 0;
#X connect 9 1 10 0;
#X connect 10 0 14 0;
#X connect 10 0 23 0;
#X connect 11 0 13 0;
#X connect 11 0 19 0;
#X connect 12 0 0 0;
#X connect 18 0 20 0;
#X connect 19 0 18 0;
#X connect 19 1 20 0;
#X connect 20 0 21 0;
#X connect 22 0 24 0;
#X connect 23 0 22 0;
#X connect 23 1 24 0;
#X connect 24 0 25 0;
#X restore -198 127 pd segment;
#N canvas 0 0 450 300 (subpatch) 0;
#X array voiced_adc 1000 float 5;
#A 0 202.003 183.641 144.876 243.441 141.31 140.023 228.962 112.22
111.055 111.451 111.081 121.931 145.015 164.339 252.293 150.02 155.805
135.585 159.612 116.665 154.34 142.415 138.737 150.385 131.833 125.764
205.784 125.687 140.157 254.989 118.03 157.188 233.835 230.785 115.752
162.832 179.774 146.169 150.02 116.575 176.737 120.055 118.641 126.223
190.001 155.245 173.251 186.658 174.355 171.234 211.705 176.104 184.876
178.102 115.233 252.224 252.977 245.186 237.156 159.963 157.728 157.858
158.715 127.571 160.495 160.1 115.566 157.064 175.529 156.222 173.652
175.166 120.012 171.49 136.593 181.018 152.988 155.853 168.276 147.789
129.397 140.47 171.132 131.716 165.155 135.901 144.392 139.518 142.628
108.307 184.283 246.876 132.667 239.575 139.294 141.201 240.882 123.301
126.196 109.311 155.372 168.25 121.064 151.082 139.846 113.126 109.86
208.342 138.763 234.075 196.795 159.643 161.598 131.25 201.298 205.325
204.143 200.594 203.882 130.579 131.965 189.171 185.749 110.301 134.934
182.877 181.102 213.627 180.947 179.127 241.271 155.427 151.608 228.295
169.808 203.034 173.475 136.14 130.087 145.455 123.666 183.74 122.535
156.32 217.519 119.058 226.65 149.668 143.231 214.785 114.502 239.458
167.008 191.175 131.892 253.134 159.724 153.366 174.41 152.07 207.135
242.367 240.371 150.752 147.121 124.618 155.961 139.269 166.394 180.323
135.664 172.999 159.769 128.342 139.381 116.494 177.809 172.007 177.193
176.622 155.636 165.369 212.708 216.097 216.751 207.327 160.061 207.352
206.781 171.551 172.175 122.605 169.009 166.883 128.925 195.378 116.203
154.917 198.001 199.29 108.032 146.558 110.556 142.428 139.82 229.72
139.394 176.944 159.327 191.061 152.776 130.378 136.617 203.261 150.218
110.11 184.838 137.493 158.955 151.75 151.068 143.974 163.233 138.334
137.269 137.691 226.262 135.999 166.924 172.97 171.221 172.285 114.547
150.445 145.793 127.453 138.04 193.149 191.671 128.897 128.233 184.319
128.004 130.325 173.455 190.697 219.725 145.295 115.326 112.79 112.09
146.708 114.2 159.701 138.822 129.64 152.707 130.036 168.891 232.048
132.912 141.868 135.192 138.16 140.957 235.308 145.109 137.964 149.326
141.573 144.509 118.712 154.075 147.872 144.064 157.975 159.707 159.148
144.054 138.828 116.571 143.502 137.703 126.654 144.556 148.228 158.234
160.465 214.765 145.642 114.917 219.683 150.956 152.478 149.049 217.364
141.988 127.214 174.256 190.226 170.274 186.717 188.187 178.443 115.383
149.049 228.967 170.988 116.882 132.511 111.74 126.09 153.956 183.135
111.813 219.132 133.055 113.866 113.61 152.254 141.544 112.355 130.816
156.627 135.997 157.238 147.666 141.669 131.296 149.171 158.241 133.307
132.492 119.754 213.318 158.948 133.85 132.01 115.47 188.415 132.56
136.678 148.771 112.227 117.407 113.13 109.655 112.14 232.594 197.517
110.948 151.561 120.861 111.611 140.565 141.278 170.283 113.087 114.363
119.622 163.856 165.562 147.599 128.095 144.857 217.377 146.899 114.392
131.529 205.235 204.95 110.615 234.757 173.137 113.225 183.212 186.783
129.376 147.604 215.317 113.46 111.145 142.272 145.663 141.909 213.082
163.741 149.236 109.875 168.618 114.007 156.927 179.196 131.896 135.153
151.847 114.308 121.237 153.126 113.501 143.243 148.61 108.843 146.651
135.136 108.675 235.34 154.797 130.82 150.948 234.189 146.778 200.507
111.855 109.013 156.689 213.304 153.566 148.726 194.71 154.793 169.617
135.744 166.283 109.072 158.523 152.393 156.83 147.261 129.765 115.169
174.863 231.275 234.687 164.354 177.574 177.282 111.62 151.626 144.968
149.051 190.012 152.502 117.843 195.845 135.333 200.314 154.93 131.771
143.392 199.42 143.307 135.911 185.773 156.585 149.258 148.301 113.822
114.509 138.468 237.894 153.271 157.579 135.909 151.866 146.893 214.65
132.224 219.824 129.001 129.632 164.152 151.873 111.892 135.67 203.557
142.675 166.064 121.273 197.486 171.767 148.829 122.519 130.997 163.501
134.959 181.538 150.245 110.079 109.484 145.958 172.678 188.106 128.646
168.932 113.468 169.141 146.667 125.163 110.861 148.89 115.391 158.472
187.654 129.137 184.678 186.568 144.089 129.859 155.071 130.765 143.904
134.053 231.007 150.193 143.211 200.722 146.262 169.473 138.389 148.836
144.949 150.41 172.932 136.657 141.272 171.759 169.536 139.555 165.992
126.514 147.96 175.629 132.938 137.392 160.344 160.321 131.565 147.962
150.399 120.182 135.048 115.636 176.381 165.494 134.522 172.772 142.734
140.938 171.331 173.843 165.629 173.725 169.789 169.415 122.194 132.494
200.882 166.289 110.44 193.016 110.92 121.858 133.887 162.978 166.275
132.241 113.081 148.406 149.466 171.059 169.647 139.776 165.308 167.336
188.623 166.041 154.743 133.8 126.908 121.451 178.005 148.939 148.289
152.74 144.879 162.7 136.588 172.499 196.876 145.857 145.757 144.838
139.991 136.152 126.294 148.708 126.951 126.582 144.392 122.01 148.08
115.331 139.398 155.012 161.243 129.956 131.393 130.671 129.851 138.158
131.502 131.307 128.117 129.73 126.008 127.522 203.646 229.513 118.456
110.944 124.918 180.379 143.312 142.938 137.403 136.484 183.53 143.043
199.589 125.045 109.186 124.337 179.816 164.894 115.748 148.934 134.143
111.262 142.752 116.283 184.359 139.421 179.737 169.367 169.117 135.594
164.572 157.774 152.417 177.696 143.501 173.338 134.154 114.315 179.251
126.772 117.085 113.569 179.396 179.453 110.71 167.689 209.35 115.162
109.457 137.015 144.242 153.076 139.709 162.489 154.762 127.914 107.879
179.757 115.383 177.997 165.217 115.532 109.38 114.347 111.822 134.491
137.534 114.508 113.745 116.226 120.136 128.795 152.944 124.735 127.097
145.41 122.919 137.923 117.771 134.979 118.707 118.475 116.698 143.36
213.746 123.112 140.039 108.324 130.283 226.656 203.194 130.9 135.676
143.038 215.465 161.85 139.276 179.107 169.569 139.019 139.6 142.377
144.811 130.515 194.41 135.39 189.886 134.366 168.505 109.829 179.221
158.757 151.391 143.769 139.677 113.337 141.975 146.382 136.453 116.373
111.631 109.356 107.913 147.397 111.266 130.204 149.756 138.658 142.399
111.74 168.937 168.037 235.263 116.36 151.378 109.654 137.893 113.356
114.105 113.975 177.905 228.922 123.632 206.148 157.188 125.807 145.08
213.748 122.232 111.888 184.702 121.388 111.194 112.445 119.16 206.89
192.386 150.217 183.636 174.838 174.016 169.412 140.746 161.465 246.386
168.911 186.388 203.27 139.155 192.739 194.191 195.208 197.618 198.17
200.022 134.36 196.352 196.881 135.2 186.14 137.658 201.339 166.152
219.549 145.254 208.969 160.06 142.107 147.383 173.586 133.644 135.112
147.822 165.015 141.269 126.293 155.595 154.48 155.735 128.832 148.531
155.175 148.75 159.184 144.971 155.666 178.98 114.662 153.443 146.599
180.41 116.375 179.953 156.432 137.007 183.948 220.267 169.381 161.142
225.671 156.859 189.923 167.322 188.124 120.78 125.457 194.219 128.794
127.683 137.068 127.521 112.678 187.818 172.529 111.852 155.338 162.467
198.356 146.926 153.328 254.078 165.293 129.087 139.152 112.324 136.444
109.157 129.21 233.059 126.039 236.316 119.973 127.499 132.533 159.822
126.22 143.415 134.229 221.724 143.653 138.04 126.976 151.006 133.04
151.365 136.907 135.411 130.603 129.91 172.485 125.067 123.501 120.612
130.583 168.844 175.58 113.648 231.21 120.487 152.676 128.781 159.452
187.154 112.951 139.7 146.073 149.782 135.187 147.524 122.172 246.179
140.713 114.134 188.108 116.795 191.218 153.966 127.465 157.391 132.934
132.129 167.053 112.307 189.263 122.186 117.806 137.552 183.123 174.263
125.513 120.345 143.206 137.223 159.067 136.177 167.083 131.974 114.195
141.661 218.519 155.998 132.803 141.517 138.56 187.967 145.997 195.238
202.356 135.069 201.563 116.687 124.036 220.279 143.092 109.92 137.848
130.441 134.537 160.051 120.195 119.655 121.588 143.581 174.122 118.777
122.377 127.428 126.335 177.323 203.756 192.322 173.771 182.472 126.222
185.706 132.727 122.813 130.268 124.775 173.13 136.136 119.187 160.516
188.517 149.131 112.239 111.74 168.865 168.033 149.885 184.756 157.502
213.66 173.903 163.943 117.05 111.925 116.543 172.625 122.779 108.562
111.825 116.428;
#X coords 0 255 999 0 200 140 1 0 0;
#X restore 391 52 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array unvoiced_adc 1000 float 5;
#A 0 963.372 1000 836.768 262.306 361.053 296.847 1236.84 258.066 582.457
564.971 565.262 9780.67 447.462 6692.16 445.055 465.597 334.696 329.53
388.646 5459.23 689.888 447.493 415.366 311.703 6455.35 6429.74 6451.21
616.756 371.088 985.719 361.538 386.415 261.971 366.428 899.457 974.862
353.188 417.854 769.547 368.512 537.571 297.401 1077.51 336.092 6193.24
634.68 668.648 672.767 663.367 267.362 691.686 332.378 709.281 1096.68
266.623 712.407 705.379 344.615 331.711 443.898 396.802 368.459 370.292
839.992 718.78 555.486 480.631 354.8 611.366 599.058 300.443 721.856
330.218 937.813 565.156 279.611 866.724 306.649 474.693 292.274 288.147
340.775 336.057 481.16 280.884 647.834 1634.15 887.859 4841.14 382.979
1122.62 1118.35 744.143 348.116 377.995 362.266 868.563 1300.45 340.905
341.694 1540.66 1558.83 4654.13 335.257 325.355 348.463 4868.47 422.736
529.485 294.767 949.393 4856.4 1265.73 4383.09 4885.69 1421.8 743.826
641.988 461.036 663.683 275.611 450.821 683.323 255.895 548.372 1155.71
446.078 501.995 929.035 1182.6 1339.58 2271.31 378.876 813.32 297.955
472.175 716.119 560.632 518.818 323.838 322.547 5076.8 6367.6 894.937
293.17 1568.15 320.152 483.539 900.334 636.313 427.446 477.385 4427.44
4605.93 346.31 1633.29 4647.21 4798.75 302.902 372.486 4691.42 349.96
384.761 362.932 416.134 876.738 452.569 353.467 876.893 871.392 373.574
430.889 437.216 673.8 289.147 435.58 409.88 394.997 432.252 268.948
419.293 893.584 690.45 4645.09 343.274 685.515 4668.07 329.33 339.269
432.273 932.403 2292.25 816.834 4775.88 4432.12 481.491 4641.13 313.341
4655.49 6593.54 498.153 6518.53 1101.92 668.804 512.348 352.541 338.519
384.429 497.124 491.407 1191.75 390.846 678.779 1443.48 301.849 268.264
1248.44 1227.77 686.241 386.167 6572.75 1136.28 450.146 1119.43 373.217
424.135 611.963 351.019 1384.49 497.676 262.612 684.073 1612.42 423.396
371.051 309.757 308.406 636.315 685.963 1126.82 306.509 513.667 4998.04
410.977 2310.71 516.059 647.245 633.195 407.466 1640.48 299.019 4909.7
468.461 422.634 410.712 430.685 1613.01 604.696 4886.55 1624.47 602.419
617.533 394.725 369.326 4454.38 772.635 435.511 4684.11 896.64 1621.69
4352.35 295.532 1193.58 4596.25 4497.45 317.133 390.123 695.316 622.518
624.33 427.279 4720.98 867.181 412.61 1415.41 4488.66 880.277 643.355
1483.33 1567.39 464.904 1575.74 416.145 1570.16 1482.06 1541.35 300.547
302.771 459.33 459.409 369.124 4665.02 344.938 459.068 1507.56 351.932
328.766 601.663 456.439 588.598 262.367 697.845 359.472 310.318 261.389
1172.48 356.605 349.864 363.784 441.561 558.283 339.235 1490.01 1501.27
468.955 881.481 468.03 1469.55 425.89 259.936 636.288 4441.8 265.778
702.83 261.103 840.367 421.144 621.535 405.627 620.099 4830.65 381.787
1542.65 4800.47 836.108 4596.31 4627.19 444.999 415.316 402.165 1509.04
1738.92 4608.02 6785.85 6583.84 261.534 1588.39 6519.88 452.164 1545.63
820.793 351.349 611.138 1827.32 357.861 338.282 589.466 2299.22 418.346
402.887 318.251 386.9 305.264 420.311 4656.06 4683.17 941.949 361.884
362.273 1027.62 889.92 1072.91 3451.82 4610.65 458.831 545.44 6577.68
256.558 1626.3 522.621 520.84 2307.59 542.88 1254.75 2927.78 490.082
296.223 408.011 1184.31 342.993 480.369 1584.13 5142.77 367.558 530.838
436.112 649.873 782.278 1317.6 1262.36 1181 304.79 322.13 334.886 316.646
436.523 421.995 1519.54 1526.95 949.874 727.651 7554.35 757.968 1266.99
6196.2 1147.23 1616.08 1117.26 1572.23 842.61 1593.05 349.319 1170.52
1529.7 344.1 451.859 1577.76 475.816 1992.84 368.856 1298.04 1559.36
505.316 6560.38 1561.66 1511.36 284.784 1519.48 6352.24 6403.21 438.229
658.776 456.094 503.926 431.276 439.38 6149.55 436.345 6543.12 448.715
444.061 444.365 335.841 427.452 296.37 707.526 320.145 3124.61 317.219
1936.66 6568.94 400.873 3175.26 6631.57 480.115 1595.74 6256.2 6173.98
270.892 6730.42 529.516 545.141 918.097 443.611 269.775 444.931 1556.37
2194.01 293.996 409.708 662.357 294.323 818.799 813.281 265.821 267.114
348.099 2178.28 325.013 348.283 310.444 385.848 1647.23 6392.44 264.877
271.976 333.399 478.288 299.16 541.762 361.037 425.504 323.884 357.194
618.224 434.647 553.168 419.586 3107.4 388.983 416.051 1283.63 709.744
6566.1 345.233 1102.69 415.893 343.677 6528.88 680.557 650.765 603.04
760.836 269.571 418.632 7477.23 424.954 411.337 483.807 373.235 720.385
378.766 981.674 266.081 924.744 7756.58 393.265 394.943 1294.5 702.088
1354.37 468.935 354.214 1489.97 403.09 1645.96 5001.74 5034.79 265.189
1727.53 414.565 443.977 313.581 659.375 1282.94 3124.39 507.957 512.97
473.37 518.535 707.812 718.36 268.541 335.805 5185.57 376.851 259.21
342.12 382.749 616.039 609.593 301.031 304.249 343.253 322.676 321.674
370.704 518.826 262.35 506.264 492.018 282.929 284.154 300.236 288.663
296.761 360.267 636.796 1101.31 473.821 1010.17 1644.07 297.705 1610.91
435.125 307.928 829.841 475.242 266.264 587.13 1619.16 432.708 4795.36
331.671 495.823 325.138 361.433 639.603 366.904 327.616 430.428 1615.26
1529.2 608.303 616.268 493.801 681.535 495.218 1072.26 956.207 416.112
4844.59 320.433 720.396 302.958 686.772 843.818 878.642 373.555 4986.04
1496.14 650.383 411.446 313.182 475.553 641.498 367.105 411.699 1088.06
409.815 373.748 294.224 853.258 1678.66 454.452 324.448 323.926 508.053
714.205 1600.38 369.703 532.831 326.27 362.841 704.793 363.443 1173.1
4723.18 807.487 325.515 803.42 351.064 415.308 3297.96 477.439 892.649
303.116 368.712 317.281 662.585 671.064 1554.14 803.446 286.395 435.162
299.926 312.956 852.957 269.32 316.153 308.756 1594.72 290.648 364.835
554.491 1009.05 416.745 787.549 308.459 810.308 1613.62 342.663 1450.63
418.457 1371.16 1013.09 1201.08 884.948 2453.14 753.473 494.942 571.581
649.351 535.406 1069.21 902.092 920.257 312.648 3287.68 3441.87 368.196
306.199 880.734 494.015 307.299 297.596 557.744 531.52 285.2 553.229
314.718 674.791 814.685 665.258 370.192 889.234 421.254 1440.89 305.954
326.141 332.347 982.342 2653.54 473.018 322.674 345.359 501.756 303.281
3638.45 5129.38 324.795 324.409 326.104 3091.2 1634.65 5025.46 443.717
444.041 427.012 1271.78 950.603 550.093 434.155 5233.14 598.852 452.408
7148.55 407.668 450.044 598.288 628.268 303.103 260.808 317.791 400.156
410.744 363.538 2455.32 1590.87 365.115 266.916 752.336 6019.68 7009.38
6875 5993.94 1075.76 1789.05 415.376 417.109 1273.5 1700.71 1660.09
597.766 322.902 537.015 421.59 291.21 423.631 429.213 368.062 387.918
484.403 3369.86 479.588 322.502 775.212 420.311 3153.77 684.85 455.964
525.473 427.086 1121.94 347.03 622.071 3024.45 295.937 308.055 381.104
3086.94 435.034 488.024 356.711 271.071 269.381 271.879 565.968 3401.42
474.561 347.944 3229.43 284.016 549.916 3188 459.926 347.671 412.379
1042.81 1170.65 293.158 301.66 266.664 266.461 478.565 1171.34 509.281
565.381 291.467 478.176 795.06 324.169 433.998 473.732 446.528 283.036
348.199 296.424 404.347 558.275 1285.16 301.274 922.371 914.916 8400.76
8000.23 1514.81 415.441 443.678 751.616 6670.38 827.785 6503.99 5933.02
854.231 512.541 393.313 898.237 407.15 1117.85 600.557 516.256 868.565
264.124 795.095 300.743 784.595 1095.79 347.152 406.394 605.338 377.342
689.22 335.138 342.603 427.011 437.339 443.528 982.452 468.201 328.943
300.642 585.86 1006.48 641.004 719.424 460.666 466.834 301.9 338.162
478.108 323.457 369.7 404.687 255.084 421.967 686.74 685.945 465.859
345.2 388.549 457.645 405.379 808.3 415.5 440.956 469.381 772.766 401.106
355.697 261.969 521.946 271.597 268.425 673.482 6224.58 410.926 364.79
883.452 1146.88 438.165 364.944 329.291 987.118 1037.2 486.59 562.582
1059.42 531.797 387.218 391.953 270.639 359.105 414.179 410.349 277.259
330.215 285.593 634.256 968.31 791.887 837.72 368.898 603.411 255.792
402.63 361.021 368.278 387.417 408.82 594.819 666.927 603.731 652.275
268.417 643.745 499.931 536.799 701.353 1568.94 1497.24 6415.22 556.123
310.636 340.214 484.52 716.939 349.193 6106.81 712.272 487.744 6060.56
891.559 1211.07 367.826 3061.41 464.139 487.732 492.89 468.462;
#X coords 0 10000 999 255 200 140 1 0 0;
#X restore 648 50 graph;
#X obj -196 -70 tabwrite~ Spectrum_Formant1_adc;
#X obj -131 -35 tabwrite~ Spectrum_Formant2_adc;
#X obj -276 183 tabwrite voiced_adc;
#X obj -256 222 tabwrite unvoiced_adc;
#N canvas 0 0 450 300 (subpatch) 0;
#X array sound 928086 float 2;
#X coords 0 1 928086 -1 200 140 1 0 0;
#X restore 957 448 graph;
#X obj -264 398 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -264 427 soundfile;
#X obj -265 465 dac~;
#X obj -100 132 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#N canvas 1233 97 500 668 segement_file 0;
#X obj 105 -358 fiddle~ 1024;
#X obj 144 -320 unpack;
#X obj 144 -283 mtof;
#X floatatom 91 -246 5 0 0 0 - - -;
#X floatatom 206 -283 5 0 0 0 - - -;
#X obj 91 -212 moses 85;
#X floatatom 91 -170 5 0 0 0 - - -;
#X floatatom 155 -171 5 0 0 0 - - -;
#X floatatom 187 -246 5 0 0 0 - - -;
#X obj 155 -134 moses 255;
#X obj 104 -399 inlet~;
#X text 52 201 Acutally same as the segment patch. But it only works
when the sound file is loaded.;
#X floatatom 215 -94 5 0 0 0 - - -;
#X floatatom 155 -92 5 0 0 0 - - -;
#X obj 89 -60 outlet;
#X obj 190 -58 outlet;
#X msg 145 2 relative;
#X obj 145 -39 t b f;
#X obj 145 41 hist 85 255 25;
#X obj 145 78 outlet;
#X msg 306 -2 relative;
#X obj 306 -40 t b f;
#X obj 306 37 hist 255 1000 25;
#X obj 306 77 outlet;
#X text 78 113 outlet>> 1 voiced duration;
#X text 77 132 outlet>> 2 voiced histgram;
#X text 280 113 outlet>> 3 unvoiced duration;
#X text 279 132 outlet>> 4 unvoiced histgram;
#X connect 0 2 1 0;
#X connect 1 0 2 0;
#X connect 1 1 4 0;
#X connect 2 0 3 0;
#X connect 2 0 8 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 7 0 9 0;
#X connect 9 0 13 0;
#X connect 9 1 12 0;
#X connect 10 0 0 0;
#X connect 12 0 15 0;
#X connect 12 0 21 0;
#X connect 13 0 14 0;
#X connect 13 0 17 0;
#X connect 16 0 18 0;
#X connect 17 0 16 0;
#X connect 17 1 18 0;
#X connect 18 0 19 0;
#X connect 20 0 22 0;
#X connect 21 0 20 0;
#X connect 21 1 22 0;
#X connect 22 0 23 0;
#X restore -159 470 pd segement_file;
#X obj -100 163 count1000;
#X obj -204 517 tabwrite voiced_adc;
#X obj -187 553 tabwrite unvoiced_adc;
#N canvas 945 364 450 569 formant_file 0;
#X obj -630 -175 *~;
#X obj -629 -138 rfft~;
#X obj -632 -91 framp~;
#X obj -390 -163 *~;
#X obj -391 -127 rfft~;
#X obj -391 -86 framp~;
#X obj -391 -45 clip~ 0 1;
#X obj -633 -41 clip~ 0 1;
#X obj -391 -216 *~ 20;
#X obj -630 -217 *~ 20;
#X obj -600 -332 hip~ 300;
#X obj -601 -294 lop~ 700;
#X obj -428 -331 hip~ 800;
#X obj -427 -301 lop~ 2400;
#X obj -481 -377 inlet~;
#N canvas 0 0 450 300 (subpatch) 0;
#X array hanning1 64 float 5;
#A 0 0 0.00240764 0.00960734 0.0215298 0.0380601 0.0590392 0.084265
0.113494 0.146446 0.182803 0.222214 0.264301 0.308658 0.354857 0.402454
0.450991 0.5 0.549009 0.597545 0.645143 0.691342 0.735699 0.777786
0.817197 0.853554 0.886506 0.915736 0.940961 0.96194 0.978471 0.990393
0.997593 1 0.997592 0.990392 0.978469 0.961939 0.940959 0.915733 0.886503
0.853551 0.817194 0.777782 0.735695 0.691338 0.645139 0.597541 0.549004
0.499996 0.450987 0.40245 0.354853 0.308654 0.264297 0.222211 0.182799
0.146443 0.113491 0.0842621 0.0590367 0.038058 0.0215281 0.00960615
0.00240701;
#X coords 0 1 63 0 200 140 1 0 0;
#X restore -474 135 graph;
#X obj -635 43 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -623 78 samplerate~;
#X obj -623 175 osc~;
#X obj -622 208 *~ -0.5;
#X obj -622 248 +~ 0.5;
#X msg -482 79 0;
#X obj -623 141 / 1;
#X obj -623 112 / 128;
#X obj -634 0 outlet~;
#X obj -391 -1 outlet~;
#X obj -573 -196 tabreceive~ hanning1;
#X obj -332 -189 tabreceive~ hanning1;
#X obj -635 289 tabwrite~ hanning1;
#X text -356 -319 << F2 range;
#X text -691 -309 F1 range >>;
#X text -653 350 Actually same as the formant patch. But it works when
sound file is loaded.;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 2 1;
#X connect 2 1 7 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 5 1;
#X connect 5 1 6 0;
#X connect 6 0 25 0;
#X connect 7 0 24 0;
#X connect 8 0 3 0;
#X connect 9 0 0 0;
#X connect 10 0 11 0;
#X connect 11 0 9 0;
#X connect 12 0 13 0;
#X connect 13 0 8 0;
#X connect 14 0 10 0;
#X connect 14 0 12 0;
#X connect 16 0 17 0;
#X connect 16 0 21 0;
#X connect 16 0 28 0;
#X connect 17 0 23 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 28 0;
#X connect 21 0 18 1;
#X connect 22 0 18 0;
#X connect 23 0 22 0;
#X connect 26 0 0 1;
#X connect 27 0 3 1;
#X restore -361 514 pd formant_file;
#X obj 7 614 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1 1
;
#X obj 7 645 metro 20;
#X obj 7 579 loadbang;
#X obj -362 665 tabwrite~ Spectrum_Formant1_adc;
#X obj -259 697 tabwrite~ Spectrum_Formant2_adc;
#N canvas 910 180 585 795 vocaltract 0;
#X floatatom 128 211 5 0 0 0 - - -;
#X floatatom 200 212 5 0 0 0 - - -;
#X obj 115 151 bp~ 300 50;
#X obj 199 150 bp~ 700 50;
#X obj 182 234 /;
#X floatatom 182 265 5 0 0 0 - - -;
#X obj 198 67 hip~ 300;
#X obj 199 97 lop~ 700;
#X obj 200 181 env~ 8192;
#X obj 116 182 env~ 8192;
#X obj 182 307 * 500;
#X floatatom 182 344 5 0 0 0 - - -;
#X obj 182 380 t b f;
#X obj 258 400 * 4;
#X obj 225 471 /;
#X obj 198 36 inlet~;
#X obj 225 505 outlet;
#X text -1 80 F1 range 300Hz to 700Hz >>;
#X text 269 66 << high pass filter;
#X text 271 89 << low pass filter;
#X text 278 146 << the ratio between low and high outputs is a crude
estimate of the peak location.;
#X text 273 176 a kind of 'balance';
#X text 233 305 << use the ratio times the middle Hz;
#X text 292 439 << L = Vc / 4*F1;
#X text 64 559 This is the patch which calculates the 'Vocal tract'.
I find the formular which refers to the vocal tract \, L = Vc / 4*F1
\, where L is length of the vocal tract \, Vc is the velocity of the
sound in air(34000cm/s) \, F1 is the frequency of the F1. We use the
'Schwa' to calculate the vocal tract \, and the average of the length
is 18cm.;
#X msg 183 418 34029;
#X connect 0 0 4 0;
#X connect 1 0 4 1;
#X connect 2 0 9 0;
#X connect 3 0 8 0;
#X connect 4 0 5 0;
#X connect 5 0 10 0;
#X connect 6 0 7 0;
#X connect 7 0 2 0;
#X connect 7 0 3 0;
#X connect 8 0 1 0;
#X connect 9 0 0 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 25 0;
#X connect 12 1 13 0;
#X connect 13 0 14 1;
#X connect 14 0 16 0;
#X connect 15 0 6 0;
#X connect 25 0 14 0;
#X restore -313 -127 pd vocaltract;
#X floatatom -314 -97 5 0 0 0 - - -;
#X obj 917 -108 loadbang;
#X text 823 197 10(s);
#X text 367 -175 700;
#X text 619 -176 2400;
#X text 364 52 255;
#X text 430 -25 I use the Fourier transformation to show the F1 and
F2 in Frequency domain.;
#X text 345 169 85(Hz);
#X text 597 170 255(Hz);
#X text 339 -47 300(Hz);
#X text 602 -49 800(Hz);
#X text 928 592 sound array shows the spectrum of the file;
#X text 908 156 This part initialises the arrays's scale;
#X text -114 -127 << sampling and FFt;
#X text -24 164 << a counter that has 10s to record;
#X text -239 394 << start the sound file \, but sorry it still needs
the;
#X text 142 394 microphone;
#X text -191 425 << write the sounds wave into sound array;
#X text -310 -188 Audio input >>;
#X text -467 -126 vocal tract part >>;
#X text -421 129 segment the voiced/unvoiced >>;
#X text -31 468 << segment the voiced/unvoiced of the file;
#X text -595 518 sampling and FFT of the file >>;
#X text 392 195 0;
#X text 482 199 5;
#X text 570 198 10(s);
#X text 640 200 0;
#X text 741 198 5;
#N canvas 0 0 450 300 (subpatch) 0;
#X array Formant1_hist 26 float 3;
#A 0 0 0 0 0.0134407 0.0755852 0.0789541 0.0884198 0.111722 0.104658
0.136296 0.109344 0.0527837 0.0415579 0.0341206 0.0200154 0.0186981
0.017649 0.0130211 0.0137322 0.0150494 0.0119952 0.0128229 0.011494
0.00791523 0.0107246 0;
#X coords 0 1 26 0 200 140 1 0 0;
#X restore 394 289 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array Formant2_hist 26 float 3;
#A 0 0.0355222 0.0576354 0.0883855 0.0898978 0.112045 0.0808912 0.0721199
0.0607609 0.0411346 0.0229534 0.0143837 0.0090738 0.011191 0.011964
0.0133755 0.0160976 0.0130058 0.0119976 0.0130058 0.0140476 0.0165009
0.0134091 0.0148541 0.0155263 0.150222 0;
#X coords 0 1 26 0 200 140 1 0 0;
#X restore 653 291 graph;
#X obj -411 222 tabset Formant1_hist;
#X obj -410 256 tabset Formant2_hist;
#X obj -317 -31 meanandSD~;
#X floatatom -374 10 5 0 0 0 - - -;
#X floatatom -328 10 5 0 0 0 - - -;
#X floatatom -374 55 5 0 0 0 - - -;
#X floatatom -327 56 5 0 0 0 - - -;
#X text -277 57 << F2.mean;
#X text -282 9 << F1.mean;
#X text -454 11 F1.SD >>;
#X text -458 57 F2.SD >>;
#N canvas 647 262 450 300 MandSd 0;
#X obj 40 29 inlet;
#X obj 58 65 mean;
#X obj 58 106 outlet;
#N canvas 580 260 450 300 SD 0;
#X obj 51 48 inlet;
#X obj 202 51 inlet;
#X obj 51 203 outlet;
#X obj 51 93 expr pow(($f1-$f2) \, 2);
#X obj 51 133 mean;
#X obj 51 170 sqrt;
#X text 35 235 Use the SD formular to calculate the standard deviation
;
#X connect 0 0 3 0;
#X connect 1 0 3 1;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X restore 5 110 pd SD;
#X obj 5 147 outlet;
#X text 150 36 This patch is used to calculate the;
#X text 152 55 Mean and Sd of voiced/unvoiced;
#X text 146 165 outlet 1 >> SD;
#X text 146 188 outlet 2 >> Mean;
#X connect 0 0 1 0;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 1 0 3 1;
#X connect 3 0 4 0;
#X restore -97 0 pd MandSd;
#X floatatom -97 40 5 0 0 0 - - -;
#X floatatom -37 38 5 0 0 0 - - -;
#X floatatom -35 102 5 0 0 0 - - -;
#N canvas 1100 261 450 300 MandSd 0;
#X obj 40 29 inlet;
#X obj 58 65 mean;
#X obj 58 106 outlet;
#N canvas 981 255 450 300 SD 0;
#X obj 51 48 inlet;
#X obj 202 51 inlet;
#X obj 51 203 outlet;
#X obj 51 93 expr pow(($f1-$f2) \, 2);
#X obj 51 133 mean;
#X obj 51 170 sqrt;
#X text 35 235 Use the SD formular to calculate the standard deviation
;
#X connect 0 0 3 0;
#X connect 1 0 3 1;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X restore 5 110 pd SD;
#X obj 5 147 outlet;
#X text 150 36 This patch is used to calculate the;
#X text 152 55 Mean and Sd of voiced/unvoiced;
#X text 146 165 outlet 1 >> SD;
#X text 146 188 outlet 2 >> Mean;
#X connect 0 0 1 0;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 1 0 3 1;
#X connect 3 0 4 0;
#X restore -95 64 pd MandSd;
#X text -25 15 << left SD of voiced \, right Mean of voiced;
#X text -25 80 << left SD of unvoiced \, right Mean of unvoiced;
#X floatatom -95 102 5 0 0 0 - - -;
#X text 387 439 0;
#X text 575 440 25(bins);
#X text 646 441 0;
#X text 834 442 25(bins);
#X obj -195 248 *~ 5;
#X msg -179 279 open speech.wav \, start;
#X msg -139 310 stop;
#X obj -194 355 writesf~;
#X text -16 279 << if you want to record sound please press button
;
#X text -82 312 << stop recording;
#X obj -18 493 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj -18 524 count1000;
#X obj -192 580 tabset Formant1_hist_file;
#X obj -191 614 tabset Formant2_hist_file;
#N canvas 0 0 450 300 (subpatch) 0;
#X array Formant1_hist_file 26 float 3;
#A 0 0 0 0 0.00233645 0.00817757 0.0146028 0.046729 0.0998832 0.103388
0.124416 0.126752 0.0940421 0.0718458 0.0981308 0.0648364 0.0367991
0.0292056 0.021028 0.0198598 0.0146028 0.00584112 0.00233645 0.00759346
0.0046729 0.00292056 0;
#X coords 0 1 26 0 200 140 1 0 0;
#X restore 397 476 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array Formant2_hist_file 26 float 3;
#A 0 0.0176152 0.0284553 0.0257453 0.0135501 0.0149051 0.0216802 0.0176152
0.0433604 0.0162602 0.0135501 0.0352304 0.0189702 0.0406504 0.0135501
0.0135501 0.00677507 0.00542005 0.0162602 0.0135501 0.00948509 0.0108401
0.00813008 0.0121951 0.00948509 0.573171 0;
#X coords 0 1 26 0 200 140 1 0 0;
#X restore 659 478 graph;
#X text 391 626 0;
#X text 579 627 25(bins);
#X text 650 628 0;
#X text 839 629 25(bins);
#X msg 916 -77 \; Spectrum_Formant1_adc xticks 0 2 64 \; Spectrum_Formant2_adc
xticks 0 2 64 \; voiced_adc 0 10 1000 \; unvoiced_adc 0 10 1000 \;
Spectrum_Formant1_adc yticks 0 0.1 1 \; Spectrum_Formant2_adc yticks
0 0.1 1 \; voiced_adc yticks 300 50 700 \; unvoiced_adc 800 50 2400
\; Formant1_hist xticks 0 1 25 \; Formant2_hist xticks 0 1 25 \; Formant1_hist_file
xticks 0 1 25 \; Formant2_hist_file xticks 0 1 25 \;;
#X text -586 372 -----------------------------------------------------------
;
#X text -170 372 -----------------------------------------------------------
;
#X text -560 315 Audio(adc~) part.;
#X text -564 646 Audio(sound file) part.;
#X text 248 372 ----------------;
#X text -66 129 << if you want to restart \, please press the bang
;
#X text 485 212 press the count bang to plot the graph;
#X connect 0 0 1 0;
#X connect 0 0 7 0;
#X connect 0 0 29 0;
#X connect 0 0 62 0;
#X connect 0 0 83 0;
#X connect 0 1 1 0;
#X connect 0 1 7 0;
#X connect 0 1 29 0;
#X connect 0 1 62 0;
#X connect 0 1 83 0;
#X connect 1 0 10 0;
#X connect 1 1 11 0;
#X connect 2 0 3 0;
#X connect 3 0 10 0;
#X connect 3 0 11 0;
#X connect 4 0 2 0;
#X connect 7 0 12 0;
#X connect 7 0 71 0;
#X connect 7 1 60 0;
#X connect 7 2 13 0;
#X connect 7 2 75 0;
#X connect 7 3 61 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 16 0 17 1;
#X connect 16 0 19 0;
#X connect 16 0 23 0;
#X connect 18 0 20 0;
#X connect 19 0 21 0;
#X connect 19 1 91 0;
#X connect 19 2 22 0;
#X connect 19 3 92 0;
#X connect 20 0 12 1;
#X connect 20 0 13 1;
#X connect 23 0 27 0;
#X connect 23 1 28 0;
#X connect 24 0 25 0;
#X connect 25 0 27 0;
#X connect 25 0 28 0;
#X connect 26 0 24 0;
#X connect 29 0 30 0;
#X connect 31 0 99 0;
#X connect 62 0 63 0;
#X connect 62 1 64 0;
#X connect 62 2 65 0;
#X connect 62 3 66 0;
#X connect 71 0 72 0;
#X connect 71 1 73 0;
#X connect 75 0 78 0;
#X connect 75 1 74 0;
#X connect 83 0 86 0;
#X connect 84 0 86 0;
#X connect 85 0 86 0;
#X connect 89 0 90 0;
#X connect 90 0 21 1;
#X connect 90 0 22 1;
